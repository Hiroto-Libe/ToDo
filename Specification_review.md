# 🛠 ToDoリストアプリ - 仕様検討書（Flask版）

## 1. 📺 画面仕様（UI構成）

### メイン画面 `/`

- 新しいタスクを入力するフォーム（テキスト + 「追加」ボタン）
- 登録済みのタスクリスト（タスク名／完了チェック／削除ボタン）
- 表示フィルター（「すべて」「未完了」「完了」）

---

## 2. 🗃 データ構造（SQLite）

### テーブル名：`todos`

| カラム名     | 型         | 説明                             |
|--------------|------------|----------------------------------|
| `id`         | INTEGER    | 主キー、自動採番                     |
| `task`       | TEXT       | タスクの内容                         |
| `done`       | BOOLEAN    | 完了フラグ（0=未完了、1=完了）         |
| `created_at` | TIMESTAMP  | 作成日時、初期値は現在時刻（任意）       |

---

## 3. 🔄 機能別仕様

### 3.1 タスク追加

- ユーザーがフォームに入力 → `POST /add`
- 空文字・空白のみはエラーとする（バリデーション）
- `task`, `done = 0` をDBに保存

### 3.2 タスク完了／未完了切り替え

- チェックボックス切替で `/complete/<id>` に `POST`
- 指定されたタスクの `done` を 1 ⇄ 0 に更新

### 3.3 タスク削除

- 削除ボタン押下で `/delete/<id>` に `POST`
- 該当IDのタスクをDBから削除

### 3.4 タスク一覧表示・フィルター

- `/` で全件表示
- `/filter/undone`：未完了のみ表示
- `/filter/done`：完了のみ表示

---

## 4. 🔗 URLルーティング仕様（Flask）

| ルートパス                | メソッド | 説明                                     |
|---------------------------|----------|------------------------------------------|
| `/`                       | GET      | タスクの一覧を表示                          |
| `/add`                    | POST     | タスクを追加                               |
| `/complete/<int:id>`      | POST     | タスクの完了状態を切り替え                    |
| `/delete/<int:id>`        | POST     | タスクを削除                               |
| `/filter/<status>`        | GET      | 状態で表示切り替え（例：`done`, `undone`） |

---

## 5. 🧪 入力バリデーション仕様

- タスク内容が空文字、または空白のみの場合は追加を拒否
- 任意で最大100文字程度の制限を加える

---

## 6. 📱 拡張案（任意対応）

- タスクに期限やタグを追加
- ダークモード対応（CSS切替）
- 登録日順／状態順のソート機能
- Bootstrapを用いたレスポンシブ対応
- ユーザー認証を追加しログイン別に管理（Flask-Loginなど）

---

## 7. 🛡 セキュリティ・保守仕様

- Jinja2の自動エスケープでXSS対策
- SQLはプリペアドステートメント（`?`）で安全に実行
- 将来的にはCSRFトークンを導入（Flask-WTFなど）
- すべてのPOSTルートには入力チェックを追加

---

## ✅ まとめ

この仕様により、以下の点を意識した開発が可能になります：

- Flaskアプリの構成・ルーティング・テンプレート処理の理解
- SQLiteを使ったCRUD処理の実践
- HTMLフォームとの連携や表示制御の経験
- 拡張性のある設計で、ログイン機能やタグ分類などへの発展も視野に入る
