# 🛠 ToDoリストアプリ - 仕様検討書（Flask版）

## 1. 📺 画面仕様（UI構成）

### メイン画面 `/`

| 要素         | 内容                                         |
|--------------|----------------------------------------------|
| 入力フォーム   | タスク内容を入力し、「追加」ボタンで登録              |
| タスクリスト   | 各タスクの内容、完了チェックボックス、削除ボタン表示     |
| フィルター     | 「すべて」「未完了」「完了」のボタンで表示切り替え       |
| 表示切替      | 状態に応じてタスクを絞り込んで表示                    |

---

## 2. 🗃 データ構造（DBテーブル仕様）

### テーブル名：`todos`

| カラム名      | 型         | 説明                             |
|---------------|------------|----------------------------------|
| `id`          | INTEGER    | 主キー、自動採番                     |
| `task`        | TEXT       | タスク内容                         |
| `done`        | BOOLEAN    | 完了フラグ（0=未完了、1=完了）         |
| `created_at`  | DATETIME   | 登録日時、初期値は現在時刻（任意）       |

#### SQL定義例

```sql
CREATE TABLE todos (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    task TEXT NOT NULL,
    done BOOLEAN NOT NULL DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

## 3. 🔄 機能別仕様

### 3.1 タスク追加
- フォームから POST リクエストを送信  
- 空文字・空白チェック（バリデーション）  
- `task`, `done=0` をデータベースに保存  

### 3.2 タスク完了／未完了切り替え
- チェックボックスで状態変更  
- `done` カラムの値を `0 ⇄ 1` に更新  

### 3.3 タスク削除
- 削除ボタンでタスクの `id` を指定し、DB から削除  

### 3.4 タスク一覧表示
- `/` にアクセス時、全タスクを取得して表示  
- `/filter/<status>` によって表示タスクを絞り込む  

---

## 4. 🔗 URLルーティング仕様

| パス                      | メソッド | 説明                                        |
|---------------------------|----------|---------------------------------------------|
| `/`                       | GET      | タスク一覧を表示                             |
| `/add`                    | POST     | タスクを追加                                 |
| `/complete/<int:id>`      | POST     | 指定タスクの完了状態を更新                    |
| `/delete/<int:id>`        | POST     | 指定タスクを削除                              |
| `/filter/<status>`        | GET      | タスクの状態に応じて表示を切り替え（例：undone） |

---

## 5. 🧪 入力バリデーション仕様

| 項目       | チェック内容                                 |
|------------|----------------------------------------------|
| タスク内容 | 空文字や空白のみの入力を禁止                     |
| 長さ制限   | 必要に応じて最大100文字などの制限を設ける          |

---

## 6. 📱 拡張対応（オプション）

| 機能             | 内容例                                                     |
|------------------|------------------------------------------------------------|
| レスポンシブ対応   | Bootstrapなどを使ってスマホでも見やすいUIに                         |
| 日付表示          | `created_at` を整形してユーザーに表示                             |
| 並び替え          | 登録日時や完了状態順に並べ替え                                   |
| タグ機能          | タスクにカテゴリやラベルをつけて分類できるようにする                    |

---

## 7. 🛡 セキュリティ・保守仕様（基本）

| 項目                   | 内容                                                    |
|------------------------|---------------------------------------------------------|
| CSRF対策               | Flask-WTFやトークンによるPOST保護（将来的に対応）            |
| 入力のエスケープ        | Jinja2 による自動エスケープ（XSS対策）                         |
| SQLインジェクション防止 | パラメータバインド（?）＋ Row Factory を使用する                |

---

## ✅ まとめ

この仕様により、FlaskとSQLiteを用いたToDoアプリ開発の全体像を把握できます。  
機能・構成ともにシンプルで、ポートフォリオとしても実装力と拡張性を示しやすい設計です。
